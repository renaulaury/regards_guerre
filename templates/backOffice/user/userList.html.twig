{% extends 'base.html.twig' %}

{% block title %}Hello BackOfficeController!{% endblock %}

{% block body %}

<h1>Back-Office</h1>

<section class="listMembers">
    
        <p class="thUsers">Pseudo</p>
        <p class="thUsers">Email</p>
        <p class="thUsers">Rôle</p>
        <p></p>
    
    
    {% if 'ROLE_ROOT' in app.user.roles %}
    
        {# Affiche tous les membres sauf ceux avec le rôle ROLE_ROOT #}
        {% for member in members %}
            {% if 'ROLE_ROOT' not in member.roles %} {# Root non affiché #}
                
                    <p>{{ member.userNickname }}</p>
                    <p>{{ member.userEmail }}</p>
                    <p>
                        {% if 'ROLE_ADMIN' in member.roles %}
                            <p>Administrateur</p>
                        {% elseif 'ROLE_USER' in member.roles %}
                            <p>Utilisateur</p>
                        {% endif %}
                    </p>
                    <p>
                        <i class="fa-solid fa-pencil"></i>
                        <i class="fa-solid fa-trash-can"></i>
                    </p>
                
            {% endif %}
        {% endfor %}

    {% elseif 'ROLE_ADMIN' in app.user.roles %}
        {% for user in users %}
            {% if 'ROLE_ROOT' not in user.roles %}

                <p>{{ user.userNickname }}</p>
                <p>{{ user.userEmail }}</p>
                
                    {% if 'ROLE_ADMIN' in user.roles %}
                        <p>Administrateur</p>    
                        <p></p>                   
                    {% elseif 'ROLE_USER' in user.roles %}
                        <p>Utilisateur</p>                    
                        <p>
                            <a href="{{ path('userEdit', {'id': user.id}) }}">
                                <i class="fa-solid fa-pencil"></i>
                            </a>
                            <i class="fa-solid fa-trash-can"></i>
                        </p>
                    {% endif %} 
            {% endif %}
        {% endfor %}
    {% endif %} 
</section>

{% endblock %}
